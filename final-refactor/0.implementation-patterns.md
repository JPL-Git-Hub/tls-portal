# Implementation Patterns Documentation Guide

## Purpose
Identify and document coding patterns that belong in advice documentation rather than generated code. Focus on capturing what you learned during development.

## Pattern vs Implementation Distinction

### Patterns (Document These)
- **Approaches that worked** - Solutions that solved real problems
- **Lessons learned** - What you discovered through trial and error
- **Integration insights** - How components actually connect in practice
- **Configuration discoveries** - Settings that matter and why
- **Gotchas and workarounds** - Problems you hit and how you solved them

### Implementations (Generate These)
- **Specific functions** - Concrete code that performs exact tasks
- **Configuration files** - Actual settings for specific environments
- **Boilerplate code** - Standard setups that rarely vary
- **File structures** - Directory layouts and file organization

## TLS Portal Pattern Categories

### 1. Authentication & Security Patterns
**What to document:**
- How multi-tenant isolation actually works in practice
- JWT middleware lessons learned
- Firebase Auth integration gotchas
- Session management discoveries
- What security rules you needed and why

### 2. Database & Data Patterns
**What to document:**
- Firestore security rules that work in real scenarios
- Client data validation approaches that caught real issues
- Subdomain generation edge cases you discovered
- Query patterns that perform well
- Multi-tenant data isolation lessons

### 3. API Design Patterns
**What to document:**
- Error handling approaches that improved user experience
- Validation patterns that caught real problems
- Rate limiting strategies that worked
- API structure decisions and their outcomes

### 4. Frontend Patterns
**What to document:**
- React patterns that simplified development
- State management approaches that scaled
- Form validation insights from user testing
- Routing solutions that handled edge cases
- Performance optimizations that made a difference

### 5. Development & Testing Patterns
**What to document:**
- Local development setups that actually work
- Testing strategies that catch real bugs
- Development workflows that save time
- Debugging approaches that work

## Simplified Documentation Approach

### For Each Pattern Category:
```markdown
## [Pattern Name]

### What We Learned
Brief description of the insight or approach

### Why This Works
The problem this solves and why this approach succeeds

### How We Implement It
High-level approach (not specific code)

### Gotchas
Problems you encountered and how to avoid them

### When to Use
Specific scenarios where this pattern applies
```

### Documentation Quality Guidelines

**Include:**
- **Real experiences** - What actually happened during development
- **Practical insights** - Lessons that save time/prevent problems
- **Context** - When and why to use this approach
- **Warnings** - Problems to watch out for

**Skip:**
- **Theoretical explanations** - Focus on practical experience
- **Complete implementations** - Leave for code generation
- **Comprehensive coverage** - Document what matters most
- **Academic rigor** - Keep it practical and actionable

## Pattern Identification Process

### 1. Quick Code Scan (30 minutes)
```bash
# Prioritize files with most git activity for pattern extraction
git log --name-only --pretty=format: | sort | uniq -c | sort -nr | head -20

# Look for patterns in actual source files (exclude node_modules)
find src -name "*.ts" -o -name "*.tsx" -o -name "*.js" -o -name "*.jsx" | \
  grep -v node_modules | \
  xargs grep -l "TODO\|FIXME\|HACK\|workaround" 2>/dev/null

# Find evolved solutions
git log --grep="fix\|improve\|refactor" --oneline | head -10

# Check for documentation vs implementation mismatches
grep -r "custom.*validation\|custom.*utility\|we built\|we created" docs/
```

**Focus pattern extraction on files that evolved significantly** - these contain the most learned insights.

**Verify technical claims** - Ensure documented patterns match actual implementation.

### 2. Capture Key Insights (60-90 minutes)
- Authentication patterns that solved real problems
- Database patterns that improved performance
- Development patterns that saved time
- Integration patterns that worked smoothly

### 3. Document Practical Lessons (60-90 minutes)
Focus on approaches that:
- Solved real problems you encountered
- Improved developer experience
- Prevented common mistakes
- Made the system more reliable

## Integration with Refactor Process

### Extract Practical Patterns Before Classification
1. **Scan for lessons learned** - Look at TODO comments, git history, and repeated solutions
2. **Document what worked** - Focus on successful approaches and problem solutions
3. **Note integration insights** - How components actually work together
4. **Capture gotchas** - Problems to watch out for

### Pattern Documentation Outputs
- **Key insights per module** - What you learned building each component
- **Integration lessons** - How modules work together in practice
- **Development discoveries** - Workflows and setups that work
- **Problem-solution pairs** - Issues encountered and how you solved them

## Success Criteria

Pattern documentation is complete when:
- [ ] Key development insights captured
- [ ] Integration lessons documented
- [ ] Common problems and solutions noted
- [ ] Successful approaches explained
- [ ] New developers can avoid your mistakes
- [ ] Technical claims match actual implementation (no false "custom" solution claims)
- [ ] Documented patterns reflect current codebase, not outdated approaches

## Time Estimate
- Pattern identification: 30-60 minutes (focus on high-change files)
- Pattern documentation: 1-3 hours (prioritize evolved solutions)
- Integration with refactor: 30 minutes
- Total: 2-5 hours

**Note: Focusing on files with significant git activity reduces pattern extraction time while capturing the most valuable insights.**

## Notes
- Focus on practical experience over comprehensive documentation
- Document what you learned, not what you think you should document
- Keep patterns actionable and specific to real scenarios
- Validate patterns by explaining them to someone else